/*! Originary Trace Browser SDK v1.0.0 | Apache-2.0 | trace.originary.xyz */
!function(){"use strict";var e=document.currentScript||document.querySelector("script[data-tenant]");if(e){var t=e.dataset.tenant||location.host,n=e.dataset.pub||"",o=e.dataset.endpoint||"https://api.trace.originary.xyz",a="true"===e.dataset.debug;if("1"!==navigator.doNotTrack&&!0!==navigator.globalPrivacyControl)if("prerender"!==document.visibilityState){"loading"===document.readyState?document.addEventListener("DOMContentLoaded",function(){r("pageview")},{once:!0}):r("pageview");var i=history.pushState;history.pushState=function(){i.apply(this,arguments),queueMicrotask(function(){r("route")})},addEventListener("popstate",function(){queueMicrotask(function(){r("route")})}),document.addEventListener("visibilitychange",function(){"hidden"===document.visibilityState&&r("ping")}),window.OriginaryTrace={track:r,version:"1.0.0"}}else a&&console.log("[OriginaryTrace] Skipping prerender state");else a&&console.log("[OriginaryTrace] Respecting DNT/GPC, tracking disabled")}function r(e){try{i=function(e){return{ts:Date.now(),kind:e||"pageview",tenant:t,path:location.pathname,ref:document.referrer||null,ua:navigator.userAgent,lang:navigator.language||null,scr:{w:screen.width,h:screen.height},src:"browser-sdk",pub:n||null}}(e),r=o.replace(/\/$/,"")+"/v1/events-browser",c={method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify(i),keepalive:!0,mode:"cors",credentials:"omit"},navigator.sendBeacon&&"hidden"===document.visibilityState?fetch(r,c).catch(function(){}):fetch(r,c).catch(function(e){a&&console.warn("[OriginaryTrace] Send failed:",e)})}catch(e){a&&console.warn("[OriginaryTrace] Track error:",e)}var i,r,c}}();
