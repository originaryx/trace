/*! Originary Trace Browser SDK v1.0.0 | Apache-2.0 | trace.originary.xyz */
!function(){"use strict";var e=document.currentScript||document.querySelector("script[data-tenant]");if(e){var t=e.dataset.tenant||location.host,n=e.dataset.pub||"",a=e.dataset.endpoint||"https://api.trace.originary.xyz",i="true"===e.dataset.debug;if("1"!==navigator.doNotTrack&&!0!==navigator.globalPrivacyControl)if("prerender"!==document.visibilityState){"loading"===document.readyState?document.addEventListener("DOMContentLoaded",function(){o("pageview")},{once:!0}):o("pageview");var r=history.pushState;history.pushState=function(){r.apply(this,arguments),queueMicrotask(function(){o("route")})},addEventListener("popstate",function(){queueMicrotask(function(){o("route")})}),document.addEventListener("visibilitychange",function(){"hidden"===document.visibilityState&&o("ping")}),window.OriginaryTrace={track:o,version:"1.0.0"}}else i&&console.log("[OriginaryTrace] Skipping prerender state");else i&&console.log("[OriginaryTrace] Respecting DNT/GPC, tracking disabled")}function o(e){try{r=function(e){return{ts:Date.now(),kind:e||"pageview",tenant:t,path:location.pathname,ref:document.referrer||null,ua:navigator.userAgent,lang:navigator.language||null,scr:{w:screen.width,h:screen.height},src:"browser-sdk",pub:n||null}}(e),o=a.replace(/\/$/,"")+"/v1/events-browser",c={method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify(r),keepalive:!0,mode:"cors",credentials:"omit"},navigator.sendBeacon&&"hidden"===document.visibilityState?fetch(o,c).catch(function(){}):fetch(o,c).catch(function(e){i&&console.warn("[OriginaryTrace] Send failed:",e)})}catch(e){i&&console.warn("[OriginaryTrace] Track error:",e)}var r,o,c}}();